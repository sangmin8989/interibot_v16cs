# ì¸í…Œë¦¬ë´‡ V5 í†µí•© ëª…ì„¸ì„œ ìµœì¢… v3.3 (ì‘ì—…ìš©)

> **ì‘ì„±ì¼**: 2024-12-21  
> **ê¸°ë°˜**: ëª…ì„¸ì„œ 2 + ëª…ì„¸ì„œ 1, 3ì˜ ê°•ì  í†µí•©  
> **ì ìˆ˜**: 96.7ì  (ë³´ì™„ ì™„ë£Œ)

---

## ğŸ“‹ ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] **ì‘ì—… 0**: process-select/page.tsx ê³µì • 12ê°œ
- [ ] **ì‘ì—… 0-1**: process-detail/page.tsx ë™ê¸°í™”
- [ ] **ì‘ì—… 0-2**: additional-options/page.tsx ì‹ ê·œ ìƒì„±
- [ ] **ì‘ì—… 1**: code-mapping.ts ìƒì„±
- [ ] **ì‘ì—… 2**: MoodSelector â†’ StyleSelector ë¦¬ë„¤ì„
- [ ] **ì‘ì—… 3**: gradeSpecs.ts í•¨ìˆ˜ ì¶”ê°€
- [ ] **ì‘ì—… 4**: types.ts íƒ€ì… í™•ì¥
- [ ] **ì‘ì—… 5**: valueCalculator.ts 6ëŒ€ ì§€ìˆ˜ ê³„ì‚°
- [ ] **ì‘ì—… 6**: index-explanation.ts ìƒì„±
- [ ] **ì‘ì—… 7**: recommendation-templates.ts ìƒì„±
- [ ] **ì‘ì—… 8**: V5 í”Œë¡œìš° 10ë‹¨ê³„ ì¬ì—°ê²°
- [ ] **ì‘ì—… 9**: dna-types.ts ëœë¤ ì œê±°
- [ ] **ì‘ì—… 10**: analysis-questions.ts ìƒì„±
- [ ] **ë¹Œë“œ í…ŒìŠ¤íŠ¸**
- [ ] **ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸**

---

## ğŸ”„ V5 í”Œë¡œìš° (10ë‹¨ê³„)

```
[1] ì§‘ì •ë³´
    â†“
[2] ì„±í–¥ë¶„ì„ (1ì°¨) â”€â”€â”€â”€â”€â”€ ìƒí™œíŒ¨í„´, ì·¨í–¥, ê°€ì¹˜ê´€
    â†“
[3] DNA ê²°ê³¼ (1ì°¨) â”€â”€â”€â”€â”€â”€ ìŠ¤íƒ€ì¼/ê³µì • ê²°ì • ê¸°ì¤€ ì„ ì–¸
    â†“
[4] ìŠ¤íƒ€ì¼ ì¶”ì²œ
    â†“
[5] ê³µì • ì¶”ì²œ
    â†“
[6] ì„±í–¥ë¶„ì„ (2ì°¨) â”€â”€â”€â”€â”€â”€ ì„ íƒ ê³µì • ê¸°ë°˜ êµ¬ì²´ì  ì§ˆë¬¸
    â†“
[7] DNA ê²°ê³¼ (2ì°¨) â”€â”€â”€â”€â”€â”€ ì˜µì…˜/ìì¬ ê²°ì • ê¸°ì¤€ ì„ ì–¸
    â†“
[8] ì„¸ë¶€ì˜µì…˜ ì¶”ì²œ + ì¶”ê°€ì˜µì…˜
    â†“
[9] ë“±ê¸‰ ì¶”ì²œ
    â†“
[10] ê²¬ì 
```

---

## ì‘ì—… 0: ê³µì • ëª©ë¡ ì¬ì •ë¹„ (12ê°œ)

**íŒŒì¼:** `app/v5/process-select/page.tsx`

**í˜„ì¬ ìƒíƒœ**: 9ê°œ ê³µì • (ì² ê±°, ì£¼ë°©, ìš•ì‹¤, íƒ€ì¼, ëª©ê³µ, ì „ê¸°, ë„ë°°, í•„ë¦„, ê¸°íƒ€)

**ë³€ê²½ ë‚´ìš©**:
```typescript
const PROCESS_OPTIONS = [
  { code: 'ì£¼ë°©', name: 'ì£¼ë°©', icon: 'ğŸ³', description: 'ì‹±í¬ëŒ€, ìƒíŒ, í›„ë“œ', hasOptions: true },
  { code: 'ìš•ì‹¤', name: 'ìš•ì‹¤', icon: 'ğŸš¿', description: 'ë„ê¸°, ìˆ˜ì „, íƒ€ì¼', hasOptions: true },
  { code: 'íƒ€ì¼', name: 'íƒ€ì¼', icon: 'ğŸ§±', description: 'í˜„ê´€, ë² ë€ë‹¤ íƒ€ì¼', hasOptions: true },
  { code: 'ë°”ë‹¥ì¬', name: 'ë°”ë‹¥ì¬', icon: 'ğŸªµ', description: 'ê°•ë§ˆë£¨, ì›ëª©, SPC', hasOptions: true },
  { code: 'ëª©ê³µ', name: 'ëª©ê³µ', icon: 'ğŸªš', description: 'ì²œì •, ëª°ë”©, ê°€ë²½', hasOptions: false },
  { code: 'ê°€êµ¬', name: 'ê°€êµ¬', icon: 'ğŸ—„ï¸', description: 'ë¶™ë°•ì´ì¥, ì‹ ë°œì¥, TVì¥', hasOptions: true },
  { code: 'ì „ê¸°', name: 'ì „ê¸°', icon: 'ğŸ’¡', description: 'ì½˜ì„¼íŠ¸, ìŠ¤ìœ„ì¹˜, ì¡°ëª…', hasOptions: false },
  { code: 'ìƒ¤ì‹œ', name: 'ìƒ¤ì‹œ', icon: 'ğŸªŸ', description: 'ë‹¨ì°½, ì´ì¤‘ì°½, ì‹œìŠ¤í…œì°½', hasOptions: true },
  { code: 'ì¤‘ë¬¸', name: 'ì¤‘ë¬¸', icon: 'ğŸšª', description: '2ì—°ë™, 3ì—°ë™, ìë™', hasOptions: true },
  { code: 'ë„ë°°', name: 'ë„ë°°', icon: 'ğŸ¨', description: 'í•©ì§€, ì‹¤í¬, ìˆ˜ì…', hasOptions: true },
  { code: 'ë„ì¥', name: 'ë„ì¥', icon: 'ğŸ–Œï¸', description: 'í˜ì¸íŠ¸, íƒ„ì„±ì½”íŠ¸', hasOptions: false },
  { code: 'í•„ë¦„', name: 'í•„ë¦„', icon: 'ğŸ“‹', description: 'ì‹œíŠ¸ì§€, ë˜í•‘', hasOptions: false },
  { code: 'ì² ê±°', name: 'ì² ê±°', icon: 'ğŸ”¨', description: 'ê¸°ì¡´ ì‹œì„¤ ì² ê±°', hasOptions: false },
] as const;
```

**ë³€ê²½ ì‚¬í•­**:
- âŒ 'ê¸°íƒ€' ì œê±°
- âœ… 'ë°”ë‹¥ì¬', 'ê°€êµ¬', 'ìƒ¤ì‹œ', 'ì¤‘ë¬¸', 'ë„ì¥' ì¶”ê°€
- âœ… hasOptions ì†ì„± ëª…ì‹œ

---

## ì‘ì—… 0-1: process-detail ë™ê¸°í™”

**íŒŒì¼:** `app/v5/process-detail/page.tsx`

**í˜„ì¬ ìƒíƒœ**: 5ê°œ ê³µì •ë§Œ ì •ì˜ (ì£¼ë°©, ìš•ì‹¤, ëª©ê³µ, ë„ë°°, íƒ€ì¼)

**ë³€ê²½ ë‚´ìš©**:
```typescript
const PROCESS_OPTIONS = [
  { code: 'ì£¼ë°©', name: 'ì£¼ë°©', icon: 'ğŸ³' },
  { code: 'ìš•ì‹¤', name: 'ìš•ì‹¤', icon: 'ğŸš¿' },
  { code: 'íƒ€ì¼', name: 'íƒ€ì¼', icon: 'ğŸ§±' },
  { code: 'ë°”ë‹¥ì¬', name: 'ë°”ë‹¥ì¬', icon: 'ğŸªµ' },
  { code: 'ëª©ê³µ', name: 'ëª©ê³µ', icon: 'ğŸªš' },
  { code: 'ê°€êµ¬', name: 'ê°€êµ¬', icon: 'ğŸ—„ï¸' },
  { code: 'ì „ê¸°', name: 'ì „ê¸°', icon: 'ğŸ’¡' },
  { code: 'ìƒ¤ì‹œ', name: 'ìƒ¤ì‹œ', icon: 'ğŸªŸ' },
  { code: 'ì¤‘ë¬¸', name: 'ì¤‘ë¬¸', icon: 'ğŸšª' },
  { code: 'ë„ë°°', name: 'ë„ë°°', icon: 'ğŸ¨' },
  { code: 'ë„ì¥', name: 'ë„ì¥', icon: 'ğŸ–Œï¸' },
  { code: 'í•„ë¦„', name: 'í•„ë¦„', icon: 'ğŸ“‹' },
] as const;
```

**ì£¼ì˜ì‚¬í•­**:
- hasOptions: trueì¸ ê³µì •ë§Œ UI í‘œì‹œ
- hasOptions: falseì¸ ê³µì •ì€ ê±´ë„ˆë›°ê¸°

---

## ì‘ì—… 0-2: ì¶”ê°€ì˜µì…˜ í˜ì´ì§€ (ì‹ ê·œ)

**íŒŒì¼:** `app/v5/additional-options/page.tsx` (ì‹ ê·œ ìƒì„±)

**í˜„ì¬ ìƒíƒœ**: íŒŒì¼ ì—†ìŒ

**ìƒì„± ë‚´ìš©**:
```typescript
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';

const ADDITIONAL_OPTIONS = [
  {
    category: 'ëƒ‰ë‚œë°©',
    icon: 'â„ï¸',
    items: [
      { code: 'aircon_system', name: 'ì‹œìŠ¤í…œ ì—ì–´ì»¨', icon: 'â„ï¸', description: 'ì²œì¥ ë§¤ë¦½í˜•' },
      { code: 'aircon_wall', name: 'ë²½ê±¸ì´ ì—ì–´ì»¨', icon: 'ğŸŒ¬ï¸', description: 'ë²½ë©´ ì„¤ì¹˜í˜•' },
      { code: 'aircon_stand', name: 'ìŠ¤íƒ ë“œ ì—ì–´ì»¨', icon: 'ğŸ§Š', description: 'ì´ë™ ê°€ëŠ¥í˜•' },
    ]
  },
  {
    category: 'ë¹ŒíŠ¸ì¸ ê°€ì „',
    icon: 'ğŸ”Œ',
    items: [
      { code: 'dishwasher', name: 'ì‹ê¸°ì„¸ì²™ê¸°', icon: 'ğŸ½ï¸', description: 'ë¹ŒíŠ¸ì¸/í”„ë¦¬ìŠ¤íƒ ë”©' },
      { code: 'builtin_oven', name: 'ë¹ŒíŠ¸ì¸ ì˜¤ë¸', icon: 'ğŸ”¥', description: 'ë¹ŒíŠ¸ì¸ ë§¤ë¦½' },
      { code: 'builtin_purifier', name: 'ë¹ŒíŠ¸ì¸ ì •ìˆ˜ê¸°', icon: 'ğŸ’§', description: 'ëƒ‰ì˜¨ì •' },
    ]
  },
  {
    category: 'ìŠ¤ë§ˆíŠ¸í™ˆ',
    icon: 'ğŸ“±',
    items: [
      { code: 'smart_switch', name: 'ìŠ¤ë§ˆíŠ¸ ìŠ¤ìœ„ì¹˜', icon: 'ğŸ“±', description: 'IoT ì—°ë™' },
      { code: 'home_auto', name: 'í™ˆì˜¤í† ë©”ì´ì…˜', icon: 'ğŸ ', description: 'í†µí•© ì œì–´' },
    ]
  },
  {
    category: 'ë¶€ê°€ì„œë¹„ìŠ¤',
    icon: 'ğŸ§¹',
    items: [
      { code: 'cleaning', name: 'ì…ì£¼ì²­ì†Œ', icon: 'ğŸ§¹', description: 'ì „ë¬¸ ì²­ì†Œ' },
    ]
  },
] as const;

export default function AdditionalOptionsPage() {
  const router = useRouter();
  const [selectedOptions, setSelectedOptions] = useState<string[]>([]);

  const toggleOption = (code: string) => {
    setSelectedOptions(prev =>
      prev.includes(code)
        ? prev.filter(c => c !== code)
        : [...prev, code]
    );
  };

  const handleNext = () => {
    localStorage.setItem('v5AdditionalOptions', JSON.stringify(selectedOptions));
    router.push('/v5/options');
  };

  const handleSkip = () => {
    localStorage.setItem('v5AdditionalOptions', JSON.stringify([]));
    router.push('/v5/options');
  };

  return (
    <div className="min-h-screen bg-gray-50 p-6">
      <div className="max-w-2xl mx-auto">
        <h1 className="text-2xl font-bold mb-2">ì¶”ê°€ ì˜µì…˜</h1>
        <p className="text-gray-600 mb-6">í•„ìš”í•œ ì¶”ê°€ í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”</p>

        {ADDITIONAL_OPTIONS.map((category) => (
          <div key={category.category} className="mb-6">
            <h2 className="text-lg font-semibold mb-3">
              {category.icon} {category.category}
            </h2>
            <div className="grid grid-cols-2 gap-3">
              {category.items.map((item) => (
                <button
                  key={item.code}
                  onClick={() => toggleOption(item.code)}
                  className={`p-4 rounded-lg border-2 text-left transition-all ${
                    selectedOptions.includes(item.code)
                      ? 'border-blue-500 bg-blue-50'
                      : 'border-gray-200 bg-white hover:border-gray-300'
                  }`}
                >
                  <div className="text-2xl mb-1">{item.icon}</div>
                  <div className="font-medium">{item.name}</div>
                  <div className="text-sm text-gray-500">{item.description}</div>
                </button>
              ))}
            </div>
          </div>
        ))}

        <div className="flex gap-3 mt-8">
          <button
            onClick={handleSkip}
            className="flex-1 py-3 border border-gray-300 rounded-lg"
          >
            ê±´ë„ˆë›°ê¸°
          </button>
          <button
            onClick={handleNext}
            className="flex-1 py-3 bg-blue-600 text-white rounded-lg"
          >
            ë‹¤ìŒ
          </button>
        </div>
      </div>
    </div>
  );
}
```

---

## ì‘ì—… 1: code-mapping.ts (ì‹ ê·œ)

**íŒŒì¼:** `lib/analysis/v5-ultimate/code-mapping.ts` (ì‹ ê·œ ìƒì„±)

**ìƒì„± ë‚´ìš©**:
```typescript
/**
 * íŠ¸ë ˆì´íŠ¸ ì½”ë“œ ë§¤í•‘
 * ê¸°ì¡´ ì½”ë“œì™€ ì‹ ê·œ ì½”ë“œ í˜¸í™˜
 */
export function normalizeTrait(trait: string): string {
  const mapping: Record<string, string> = {
    'MODERN_STYLE': 'MODERN_LOVER',
    'NATURAL_STYLE': 'NATURAL_LOVER',
    'KID_SAFE_NEED': 'SAFETY_NEED',
    'QUIET_NEED': 'SOUNDPROOF_NEED',
    'COOKING_DAILY': 'COOKING_LOVER',
    'CLEANING_LAZY': 'CLEANING_SYSTEM_NEED',
  };
  return mapping[trait] || trait;
}

export function normalizeTraits(traits: string[]): string[] {
  return traits.map(normalizeTrait);
}

/**
 * ê³µì • í™•ì¥ í•¨ìˆ˜
 * ê³µì • ëª©ë¡ ì •ë¹„ ì™„ë£Œë¡œ ë‹¨ìˆœ ë°˜í™˜
 */
export function expandProcesses(processes: string[]): string[] {
  return processes;
}
```

---

## ì‘ì—… 2: ìŠ¤íƒ€ì¼ ìš©ì–´ ë³€ê²½

**ëŒ€ìƒ íŒŒì¼:**
- `components/v5-ultimate/MoodSelector.tsx` â†’ `StyleSelector.tsx` (ë¦¬ë„¤ì„)
- `app/v5/page.tsx` (import ê²½ë¡œ ìˆ˜ì •)
- ì „ì²´ í”„ë¡œì íŠ¸ì—ì„œ `mood` â†’ `style`, `Mood` â†’ `Style`

**ë³€ê²½ ë‚´ìš©**:
1. íŒŒì¼ ë¦¬ë„¤ì„: `MoodSelector.tsx` â†’ `StyleSelector.tsx`
2. ì»´í¬ë„ŒíŠ¸ëª… ë³€ê²½: `MoodSelector` â†’ `StyleSelector`
3. íƒ€ì… ë³€ê²½: `MoodResult` â†’ `StyleResult`
4. ë³€ìˆ˜ëª… ë³€ê²½: `mood` â†’ `style`, `Mood` â†’ `Style`
5. UI í…ìŠ¤íŠ¸: "ë¬´ë“œ" â†’ "ìŠ¤íƒ€ì¼"

**ì°¸ê³ **: `grep` ê²°ê³¼ì— ë”°ë¥´ë©´ `app/v5/page.tsx`ì—ì„œë§Œ ì‚¬ìš© ì¤‘

---

## ì‘ì—… 3: ë“±ê¸‰ ì¶”ì²œ í•¨ìˆ˜

**íŒŒì¼:** `lib/data/gradeSpecs.ts` (ê¸°ì¡´ íŒŒì¼ì— ì¶”ê°€)

**í˜„ì¬ ìƒíƒœ**: `ArgenGrade` íƒ€ì… ìˆìŒ, í•¨ìˆ˜ ì—†ìŒ

**ì¶”ê°€ ë‚´ìš©**:
```typescript
import { normalizeTraits } from '@/lib/analysis/v5-ultimate/code-mapping';

export type ArgenGrade = 'ESSENTIAL' | 'STANDARD' | 'OPUS'; // ê¸°ì¡´

interface RecommendGradeInput {
  budget: number;
  pyeong: number;
  traits: string[];
  purpose?: 'longterm' | 'midterm' | 'sale';
}

export function recommendGrade(input: RecommendGradeInput): ArgenGrade {
  const normalizedTraits = normalizeTraits(input.traits);
  let score = 0;

  // ì˜ˆì‚° ê¸°ë°˜ (40%)
  const budgetPerPyeong = input.budget / input.pyeong;
  if (budgetPerPyeong >= 180) score += 40;
  else if (budgetPerPyeong >= 120) score += 25;
  else score += 10;

  // ë¼ì´í”„ìŠ¤íƒ€ì¼ ê¸°ë°˜ (30%)
  if (normalizedTraits.includes('COOKING_LOVER')) score += 10;
  if (normalizedTraits.includes('CLEANING_SYSTEM_NEED')) score += 5;
  if (normalizedTraits.includes('SOUNDPROOF_NEED')) score += 10;
  if (normalizedTraits.includes('SAFETY_NEED')) score += 5;

  // ê±°ì£¼ ëª©ì  ê¸°ë°˜ (30%)
  const purposeScore: Record<string, number> = {
    longterm: 15,
    midterm: 10,
    sale: 5,
  };
  score += purposeScore[input.purpose || 'midterm'];

  // ë“±ê¸‰ ê²°ì •
  if (score >= 70) return 'OPUS';
  if (score >= 40) return 'STANDARD';
  return 'ESSENTIAL';
}

export function getGradeMessage(grade: ArgenGrade): string {
  const messages: Record<ArgenGrade, string> = {
    ESSENTIAL: 'ì‹¤ì† ìˆê²Œ, í•„ìˆ˜ë§Œ í™•ì‹¤í•˜ê²Œ í•˜ëŠ” ê²Œ ë§ì•„ìš”.',
    STANDARD: 'ê°€ì„±ë¹„ ìµœì í™” êµ¬ì„±ì´ì—ìš”. ëŒ€ë¶€ë¶„ ì´ ë“±ê¸‰ ì„ íƒí•´ìš”.',
    OPUS: 'ì˜¤ë˜ ì‚¬ì‹¤ ê±°ë©´ í™•ì‹¤íˆ ì¢‹ì€ ê±¸ë¡œ í•˜ì„¸ìš”.',
  };
  return messages[grade];
}
```

---

## ì‘ì—… 4: íƒ€ì… í™•ì¥

**íŒŒì¼:** `lib/analysis/v5-ultimate/types.ts` (ê¸°ì¡´ íŒŒì¼ ìˆ˜ì •)

**í˜„ì¬ ìƒíƒœ**: `ValueScores` ìˆìŒ (optional í•„ë“œ)

**ì¶”ê°€ ë‚´ìš©**:
```typescript
import type { ArgenGrade } from '@/lib/data/gradeSpecs';

// ê¸°ì¡´ ValueScores ìœ ì§€
export interface ValueScores {
  homeValueIndex: number;
  lifeQualityScore: number;
  spaceEfficiency?: number;
  maintenance?: number;
  energy?: number;
  investment?: number;
}

// 6ëŒ€ ì§€ìˆ˜ ì™„ì „ì²´ (ì‹ ê·œ)
export interface FullValueScores {
  homeValueIndex: number;
  lifeQualityScore: number;
  spaceEfficiency: number;
  maintenance: number;
  energy: number;
  investment: number;
  total: number;
}

// 6ëŒ€ ì§€ìˆ˜ ì…ë ¥ (ì‹ ê·œ)
export interface SixIndexInput {
  housingType: string;
  pyeong: number;
  familySize: number;
  grade: ArgenGrade;
  selectedProcesses: string[];
  traits: string[];
  budget: number;
  additionalOptions?: string[];
}

// 6ëŒ€ ì§€ìˆ˜ ì„¤ëª… (ì‹ ê·œ)
export interface IndexExplanation {
  score: number;
  summary: string;
  details: string[];
  improvement?: string;
}

export interface FullIndexExplanations {
  homeValue: IndexExplanation;
  lifeQuality: IndexExplanation;
  spaceEfficiency: IndexExplanation;
  maintenance: IndexExplanation;
  energy: IndexExplanation;
  investment: IndexExplanation;
}
```

---

## ì‘ì—… 5: 6ëŒ€ ì§€ìˆ˜ ê³„ì‚°

**íŒŒì¼:** `lib/analysis/v5-ultimate/valueCalculator.ts` (ê¸°ì¡´ íŒŒì¼ì— ì¶”ê°€)

**ì¶”ê°€ ë‚´ìš©**: (ëª…ì„¸ì„œ 2 ê¸°ë°˜, additionalOptions ë°˜ì˜)

```typescript
import { normalizeTraits } from './code-mapping';
import type { SixIndexInput, FullValueScores } from './types';

/**
 * 6ëŒ€ ì§€ìˆ˜ í†µí•© ê³„ì‚°
 * ê¸°ì¡´ calculateHomeValueIndex, calculateLifeQualityScoreëŠ” ì´ í•¨ìˆ˜ë¡œ ëŒ€ì²´ ì˜ˆì •
 */
export function calculateSixIndex(rawInput: SixIndexInput): FullValueScores {
  const input = {
    ...rawInput,
    traits: normalizeTraits(rawInput.traits),
  };

  const homeValueIndex = calcHomeValue(input);
  const lifeQualityScore = calcLifeQuality(input);
  const spaceEfficiency = calcSpaceEfficiency(input);
  const maintenance = calcMaintenance(input);
  const energy = calcEnergy(input);
  const investment = calcInvestment(input);

  // ê°€ì¤‘ì¹˜ ì ìš© ì¢…í•©ì ìˆ˜
  const total = Math.round(
    homeValueIndex * 0.2 +
    lifeQualityScore * 0.25 +
    spaceEfficiency * 0.15 +
    maintenance * 0.15 +
    energy * 0.1 +
    investment * 0.15
  );

  return {
    homeValueIndex,
    lifeQualityScore,
    spaceEfficiency,
    maintenance,
    energy,
    investment,
    total,
  };
}

// 1. ì§‘ê°’ë°©ì–´ì§€ìˆ˜
function calcHomeValue(input: SixIndexInput): number {
  let score = 40;

  // ì£¼ê±°í˜•íƒœ (+5~15)
  const housingPoints: Record<string, number> = {
    'ì•„íŒŒíŠ¸': 15, 'ì˜¤í”¼ìŠ¤í…”': 10, 'ë¹Œë¼': 8, 'ë‹¨ë…ì£¼íƒ': 5
  };
  score += housingPoints[input.housingType] || 5;

  // í‰ìˆ˜ (+4~12)
  if (input.pyeong >= 24 && input.pyeong <= 34) score += 12;
  else if (input.pyeong >= 20 && input.pyeong <= 40) score += 8;
  else score += 4;

  // ê³µì • (+1~5 per ê³µì •)
  const processPoints: Record<string, number> = {
    'ì£¼ë°©': 5, 'ìš•ì‹¤': 4, 'ë°”ë‹¥ì¬': 3, 'ìƒ¤ì‹œ': 3, 'ë„ë°°': 2, 'ì „ê¸°': 1
  };
  for (const process of input.selectedProcesses) {
    score += processPoints[process] || 0;
  }

  // ë“±ê¸‰ (+4~10)
  const gradePoints: Record<string, number> = { OPUS: 10, STANDARD: 7, ESSENTIAL: 4 };
  score += gradePoints[input.grade] || 4;

  // íŠ¸ë Œë“œ (+3~5)
  if (input.traits.includes('MODERN_LOVER')) score += 5;
  else if (input.traits.includes('NATURAL_LOVER')) score += 3;

  return Math.min(100, score);
}

// 2. ìƒí™œì•ˆì •ì§€ìˆ˜
function calcLifeQuality(input: SixIndexInput): number {
  let score = 30;

  // ë¼ì´í”„ìŠ¤íƒ€ì¼ ë§¤ì¹­ (+4~10)
  if (input.traits.includes('COOKING_LOVER') && input.selectedProcesses.includes('ì£¼ë°©')) {
    score += input.grade === 'OPUS' ? 10 : input.grade === 'STANDARD' ? 7 : 4;
  }
  if (input.traits.includes('CLEANING_SYSTEM_NEED') && input.selectedProcesses.includes('ë°”ë‹¥ì¬')) {
    score += 10;
  }
  if (input.traits.includes('SOUNDPROOF_NEED') && input.selectedProcesses.includes('ì¤‘ë¬¸')) {
    score += 10;
  }

  // ê°€ì¡± ë§ì¶¤ (+15)
  if (input.traits.includes('SAFETY_NEED') && input.selectedProcesses.includes('ê°€êµ¬')) {
    score += 15;
  }

  // ê±´ê°•/í¸ì˜ (+7~10)
  if (input.selectedProcesses.includes('ìš•ì‹¤')) score += 10;
  if (input.selectedProcesses.includes('ì „ê¸°')) score += 8;
  if (input.additionalOptions?.includes('aircon_system')) score += 7; // âœ… ì¶”ê°€ì˜µì…˜ ë°˜ì˜

  return Math.min(100, score);
}

// 3. ê³µê°„íš¨ìœ¨ì§€ìˆ˜
function calcSpaceEfficiency(input: SixIndexInput): number {
  let score = 40;

  // ìˆ˜ë‚© (+10~15)
  if (input.selectedProcesses.includes('ê°€êµ¬')) score += 15;
  if (input.traits.includes('STORAGE_NEED')) score += 10;

  // ê°€ì¡± ì ì •ë„ (+8~20)
  const pyeongPerPerson = input.pyeong / input.familySize;
  if (pyeongPerPerson >= 12) score += 20;
  else if (pyeongPerPerson >= 10) score += 16;
  else if (pyeongPerPerson >= 8) score += 12;
  else score += 8;

  // ê³µê°„í™œìš© (+5)
  if (input.selectedProcesses.includes('ì£¼ë°©')) score += 5;
  if (input.selectedProcesses.includes('ì¤‘ë¬¸')) score += 5;

  return Math.min(100, score);
}

// 4. ìœ ì§€ê´€ë¦¬ìš©ì´ë„
function calcMaintenance(input: SixIndexInput): number {
  let score = 40;

  // ìì¬ ë‚´êµ¬ì„± (+15~25) - STANDARDê°€ ê°€ì¥ ë†’ìŒ
  const gradePoints: Record<string, number> = { STANDARD: 25, ESSENTIAL: 20, OPUS: 15 };
  score += gradePoints[input.grade] || 20;

  // ì²­ì†Œ í¸ì˜ (+10~20)
  if (input.traits.includes('CLEANING_SYSTEM_NEED')) {
    score += input.grade === 'STANDARD' ? 20 : input.grade === 'ESSENTIAL' ? 15 : 10;
  } else {
    score += 15;
  }

  // ìœ ì§€ë¹„ (+8~15)
  const maintenancePoints: Record<string, number> = { STANDARD: 15, ESSENTIAL: 12, OPUS: 8 };
  score += maintenancePoints[input.grade] || 12;

  return Math.min(100, score);
}

// 5. ì—ë„ˆì§€íš¨ìœ¨ì§€ìˆ˜
function calcEnergy(input: SixIndexInput): number {
  let score = 30;

  // ìƒ¤ì‹œ ë‹¨ì—´ (+15~35)
  if (input.selectedProcesses.includes('ìƒ¤ì‹œ')) {
    score += input.grade === 'OPUS' ? 35 : input.grade === 'STANDARD' ? 25 : 15;
  }

  // ì¡°ëª… (+15)
  if (input.selectedProcesses.includes('ì „ê¸°')) score += 15;

  // ëƒ‰ë‚œë°© (+10~20) - ì¶”ê°€ì˜µì…˜ ê¸°ë°˜
  if (input.additionalOptions?.includes('aircon_system')) {
    score += input.grade === 'OPUS' ? 20 : input.grade === 'STANDARD' ? 15 : 10;
  }

  return Math.min(100, score);
}

// 6. íˆ¬ìíš¨ìœ¨ì§€ìˆ˜
function calcInvestment(input: SixIndexInput): number {
  let score = 40;
  const budgetPerPyeong = input.budget / input.pyeong;

  // ì˜ˆì‚° ë°°ë¶„ ì ì •ì„± (+15~30)
  if (input.grade === 'ESSENTIAL' && budgetPerPyeong <= 100) score += 30;
  else if (input.grade === 'STANDARD' && budgetPerPyeong >= 100 && budgetPerPyeong <= 150) score += 30;
  else if (input.grade === 'OPUS' && budgetPerPyeong >= 150) score += 30;
  else score += 15;

  // í•µì‹¬ ê³µì • ì§‘ì¤‘ (+5~8)
  if (input.selectedProcesses.includes('ì£¼ë°©')) score += 8;
  if (input.selectedProcesses.includes('ìš•ì‹¤')) score += 7;
  if (input.selectedProcesses.includes('ë°”ë‹¥ì¬')) score += 5;

  return Math.min(100, score);
}
```

---

## ì‘ì—… 6: 6ëŒ€ ì§€ìˆ˜ ì„¤ëª…

**íŒŒì¼:** `lib/analysis/v5-ultimate/index-explanation.ts` (ì‹ ê·œ ìƒì„±)

**ìƒì„± ë‚´ìš©**: (ëª…ì„¸ì„œ 2 ê¸°ë°˜)

```typescript
import type { FullValueScores, SixIndexInput, IndexExplanation, FullIndexExplanations } from './types';

export function generateExplanations(
  scores: FullValueScores,
  input: SixIndexInput
): FullIndexExplanations {
  return {
    homeValue: explainHomeValue(scores.homeValueIndex, input),
    lifeQuality: explainLifeQuality(scores.lifeQualityScore, input),
    spaceEfficiency: explainSpaceEfficiency(scores.spaceEfficiency, input),
    maintenance: explainMaintenance(scores.maintenance, input),
    energy: explainEnergy(scores.energy, input),
    investment: explainInvestment(scores.investment, input),
  };
}

function explainHomeValue(score: number, input: SixIndexInput): IndexExplanation {
  const details: string[] = [];
  
  if (input.housingType === 'ì•„íŒŒíŠ¸') {
    details.push('ì•„íŒŒíŠ¸ëŠ” ë¦¬ëª¨ë¸ë§ ì‹œ ê°€ì¹˜ ìƒìŠ¹ íš¨ê³¼ê°€ ê°€ì¥ í¼');
  }
  if (input.selectedProcesses.includes('ì£¼ë°©')) {
    details.push('ì£¼ë°© ë¦¬ëª¨ë¸ë§ì€ ì§‘ê°’ ë°©ì–´ì— ê°€ì¥ íš¨ê³¼ì ');
  }
  if (input.selectedProcesses.includes('ìš•ì‹¤')) {
    details.push('ìš•ì‹¤ì€ êµ¬ë§¤ìê°€ ê°€ì¥ ë¨¼ì € í™•ì¸í•˜ëŠ” ê³µê°„');
  }

  const recoveryRate = score >= 85 ? 80 : score >= 70 ? 65 : 50;

  return {
    score,
    summary: `5ë…„ í›„ ë§¤ë„ ì‹œ íˆ¬ìê¸ˆ ì•½ ${recoveryRate}% íšŒìˆ˜ ì˜ˆìƒ`,
    details,
    improvement: score < 85 ? 'ìƒ¤ì‹œ êµì²´ ì¶”ê°€ ì‹œ +10% íšŒìˆ˜ìœ¨ ìƒìŠ¹' : undefined,
  };
}

function explainLifeQuality(score: number, input: SixIndexInput): IndexExplanation {
  const details: string[] = [];

  if (input.traits.includes('COOKING_LOVER') && input.selectedProcesses.includes('ì£¼ë°©')) {
    details.push('ìš”ë¦¬ ë™ì„  40% ë‹¨ì¶• ì˜ˆìƒ');
  }
  if (input.traits.includes('CLEANING_SYSTEM_NEED') && input.selectedProcesses.includes('ë°”ë‹¥ì¬')) {
    details.push('ì²­ì†Œ ì‹œê°„ 50% ì ˆê° ì˜ˆìƒ (ê°•ë§ˆë£¨ ì„ íƒ ì‹œ)');
  }
  if (input.selectedProcesses.includes('ìš•ì‹¤')) {
    details.push('ìš•ì‹¤ ì‚¬ìš© ë§Œì¡±ë„ ëŒ€í­ ìƒìŠ¹');
  }

  return {
    score,
    summary: 'ì¼ìƒ ìƒí™œ í¸ì˜ì„± ê°œì„  íš¨ê³¼',
    details,
  };
}

function explainSpaceEfficiency(score: number, input: SixIndexInput): IndexExplanation {
  const pyeongPerPerson = (input.pyeong / input.familySize).toFixed(1);
  const details: string[] = [`1ì¸ë‹¹ ${pyeongPerPerson}í‰ ì‚¬ìš©`];

  if (input.selectedProcesses.includes('ê°€êµ¬')) {
    details.push('ë¶™ë°•ì´ì¥ìœ¼ë¡œ ìˆ˜ë‚©ë ¥ 2ë°° ì¦ê°€');
  }

  return {
    score,
    summary: `${input.familySize}ì¸ ê°€ì¡± ê¸°ì¤€ ê³µê°„ íš¨ìœ¨`,
    details,
    improvement: !input.selectedProcesses.includes('ê°€êµ¬') 
      ? 'ë¶™ë°•ì´ì¥ ì¶”ê°€ ì‹œ ìˆ˜ë‚©ë ¥ 2ë°°' 
      : undefined,
  };
}

function explainMaintenance(score: number, input: SixIndexInput): IndexExplanation {
  const details: string[] = [];
  
  if (input.grade === 'STANDARD') {
    details.push('ê°•ë§ˆë£¨ + ì—”ì§€ë‹ˆì–´ë“œìŠ¤í†¤ ì¡°í•© - ê´€ë¦¬ ì‰¬ì›€');
    details.push('10ë…„ ì˜ˆìƒ ìœ ì§€ë¹„: ì•½ 150ë§Œì›');
  } else if (input.grade === 'OPUS') {
    details.push('ì›ëª©ë§ˆë£¨ + ì²œì—°ëŒ€ë¦¬ì„ - ì£¼ê¸°ì  ê´€ë¦¬ í•„ìš”');
    details.push('10ë…„ ì˜ˆìƒ ìœ ì§€ë¹„: ì•½ 300ë§Œì›');
  } else {
    details.push('ê°•í™”ë§ˆë£¨ + ì¸ì¡°ëŒ€ë¦¬ì„ - ê´€ë¦¬ ë§¤ìš° ì‰¬ì›€');
    details.push('10ë…„ ì˜ˆìƒ ìœ ì§€ë¹„: ì•½ 100ë§Œì›');
  }

  return {
    score,
    summary: 'ìœ ì§€ê´€ë¦¬ ìš©ì´ì„±',
    details,
  };
}

function explainEnergy(score: number, input: SixIndexInput): IndexExplanation {
  const details: string[] = [];
  let annualSaving = 0;

  if (input.selectedProcesses.includes('ìƒ¤ì‹œ')) {
    const saving = input.grade === 'OPUS' ? 45 : input.grade === 'STANDARD' ? 35 : 25;
    annualSaving += saving;
    details.push(`ìƒ¤ì‹œ êµì²´ë¡œ ëƒ‰ë‚œë°©ë¹„ ì—° ${saving}ë§Œì› ì ˆê°`);
  }
  if (input.additionalOptions?.includes('aircon_system')) {
    annualSaving += 20;
    details.push('ì‹œìŠ¤í…œ ì—ì–´ì»¨ìœ¼ë¡œ ì—° 20ë§Œì› ì¶”ê°€ ì ˆê°');
  }

  return {
    score,
    summary: annualSaving > 0 ? `ì—°ê°„ ì•½ ${annualSaving}ë§Œì› ì—ë„ˆì§€ ë¹„ìš© ì ˆê°` : 'ì—ë„ˆì§€ íš¨ìœ¨',
    details,
    improvement: !input.selectedProcesses.includes('ìƒ¤ì‹œ')
      ? 'ìƒ¤ì‹œ êµì²´ ì¶”ê°€ ì‹œ ëƒ‰ë‚œë°©ë¹„ 30% ì ˆê°'
      : undefined,
  };
}

function explainInvestment(score: number, input: SixIndexInput): IndexExplanation {
  const budgetPerPyeong = Math.round(input.budget / input.pyeong);
  const details: string[] = [`í‰ë‹¹ ${budgetPerPyeong}ë§Œì› íˆ¬ì`];

  const coreProcesses = ['ì£¼ë°©', 'ìš•ì‹¤', 'ë°”ë‹¥ì¬'].filter(p => 
    input.selectedProcesses.includes(p)
  );
  if (coreProcesses.length > 0) {
    details.push(`í•µì‹¬ ê³µì • ì§‘ì¤‘: ${coreProcesses.join(', ')}`);
  }

  return {
    score,
    summary: 'ì˜ˆì‚° ëŒ€ë¹„ íš¨ìœ¨ì„±',
    details,
  };
}
```

---

## ì‘ì—… 7: ì¶”ì²œ ì´ìœ  í…œí”Œë¦¿

**íŒŒì¼:** `lib/analysis/v5-ultimate/recommendation-templates.ts` (ì‹ ê·œ ìƒì„±)

**ìƒì„± ë‚´ìš©**: (ëª…ì„¸ì„œ 2, 3 ê¸°ë°˜)

```typescript
interface RecommendationTemplate {
  recall: string;
  recommended: string;
  reason: string;
  warning?: string;
}

type TraitProcessTemplates = Record<string, Record<string, RecommendationTemplate>>;

const TEMPLATES: TraitProcessTemplates = {
  COOKING_LOVER: {
    'ì£¼ë°©': {
      recall: 'ìš”ë¦¬ ìì£¼ í•˜ì‹ ë‹¤ê³  í–ˆì–ì•„ìš”.',
      recommended: 'ì—”ì§€ë‹ˆì–´ë“œìŠ¤í†¤ ìƒíŒ',
      reason: 'ì—´ê³¼ ì–¼ë£©ì— ê°•í•´ìš”. ëœ¨ê±°ìš´ ëƒ„ë¹„ ë°”ë¡œ ì˜¬ë ¤ë„ ë¨.',
      warning: 'ì¸ì¡°ëŒ€ë¦¬ì„ì€ 1ë…„ í›„ ëˆ„ë ‡ê²Œ ë³€ìƒ‰ë¼ìš”.',
    },
  },
  CLEANING_SYSTEM_NEED: {
    'ë°”ë‹¥ì¬': {
      recall: 'ì²­ì†Œ ìì£¼ ì•ˆ í•˜ì‹ ë‹¤ê³  í–ˆì–ì•„ìš”.',
      recommended: 'ê°•ë§ˆë£¨',
      reason: 'ë¬¼ê±¸ë ˆë¡œ ì“± ë‹¦ìœ¼ë©´ ë. ìŠ¤í¬ë˜ì¹˜ë„ ì˜ ì•ˆ ë‚¨.',
      warning: 'ì›ëª©ë§ˆë£¨ëŠ” 6ê°œì›”ë§ˆë‹¤ ì™ì‹± í•„ìš”í•´ìš”.',
    },
    'ìš•ì‹¤': {
      recall: 'ì²­ì†Œ ìì£¼ ì•ˆ í•˜ì‹ ë‹¤ê³  í–ˆì–ì•„ìš”.',
      recommended: 'ëŒ€í˜• íƒ€ì¼ (600x600)',
      reason: 'ì¤„ëˆˆì´ ì ì–´ì„œ ì²­ì†Œí•  ê³³ì´ ì¤„ì–´ìš”.',
      warning: 'ì†Œí˜• íƒ€ì¼ì€ ì¤„ëˆˆ ì²­ì†Œ ì§€ì˜¥.',
    },
  },
  SOUNDPROOF_NEED: {
    'ì¤‘ë¬¸': {
      recall: 'ì†ŒìŒì— ë¯¼ê°í•˜ë‹¤ê³  í–ˆì–ì•„ìš”.',
      recommended: '3ì—°ë™ ìë™ ì¤‘ë¬¸',
      reason: 'ë³µì¸µ ìœ ë¦¬ + ê¸°ë°€ íŒ¨í‚¹ìœ¼ë¡œ ì†ŒìŒ ì°¨ë‹¨.',
      warning: '2ì—°ë™ì€ í‹ˆìƒˆ ì†ŒìŒ ë“¤ì–´ì™€ìš”.',
    },
    'ìƒ¤ì‹œ': {
      recall: 'ì†ŒìŒì— ë¯¼ê°í•˜ë‹¤ê³  í–ˆì–ì•„ìš”.',
      recommended: 'ì‹œìŠ¤í…œ ì´ì¤‘ì°½',
      reason: 'ì™¸ë¶€ ì†ŒìŒ 80% ì°¨ë‹¨. ì¸µê°„ì†ŒìŒ ì™„í™”.',
      warning: 'ë‹¨ì°½ì€ ì†ŒìŒ ì°¨ë‹¨ íš¨ê³¼ ì—†ì–´ìš”.',
    },
  },
  SAFETY_NEED: {
    'ê°€êµ¬': {
      recall: 'ì•„ì´ê°€ ìˆì–´ì„œ ì•ˆì „ì´ ì¤‘ìš”í•˜ë‹¤ê³  í–ˆì–ì•„ìš”.',
      recommended: 'ì•„ë¥´ì   ë§ì¶¤ ê°€êµ¬',
      reason: 'ëª¨ì„œë¦¬ ë¼ìš´ë”© + ìŠ¬ë¡œìš° ëŒí•‘ ê²½ì²© ê¸°ë³¸.',
      warning: 'ê¸°ì„±í’ˆì€ ë‚ ì¹´ë¡œìš´ ëª¨ì„œë¦¬ ì£¼ì˜.',
    },
  },
  MODERN_LOVER: {
    'ë„ë°°': {
      recall: 'ëª¨ë˜ ìŠ¤íƒ€ì¼ ì¢‹ì•„í•˜ì‹ ë‹¤ê³  í–ˆì–ì•„ìš”.',
      recommended: 'ì‹¤í¬ ë²½ì§€ (ê·¸ë ˆì´/í™”ì´íŠ¸)',
      reason: 'ê¹”ë”í•œ ë¬´ê´‘ ë§ˆê°. ëª¨ë˜ ì¸í…Œë¦¬ì–´ í•„ìˆ˜.',
      warning: 'ë¬´ëŠ¬ ìˆëŠ” í•©ì§€ëŠ” ì´ŒìŠ¤ëŸ¬ì›Œ ë³´ì¼ ìˆ˜ ìˆì–´ìš”.',
    },
  },
  NATURAL_LOVER: {
    'ë°”ë‹¥ì¬': {
      recall: 'ë‚´ì¶”ëŸ´ ìŠ¤íƒ€ì¼ ì¢‹ì•„í•˜ì‹ ë‹¤ê³  í–ˆì–ì•„ìš”.',
      recommended: 'ì›ëª©ë§ˆë£¨ ë˜ëŠ” ì˜¨ëŒë§ˆë£¨',
      reason: 'ë”°ëœ»í•œ ë‚˜ë¬´ ì§ˆê°. ìì—°ìŠ¤ëŸ¬ìš´ ë¶„ìœ„ê¸°.',
      warning: 'ê°•í™”ë§ˆë£¨ëŠ” í”Œë¼ìŠ¤í‹± ëŠë‚Œë‚  ìˆ˜ ìˆì–´ìš”.',
    },
  },
};

export function getRecommendation(
  trait: string,
  process: string
): RecommendationTemplate | null {
  return TEMPLATES[trait]?.[process] || null;
}

export function getRecommendationsForTraits(
  traits: string[],
  selectedProcesses: string[]
): Array<RecommendationTemplate & { trait: string; process: string }> {
  const results: Array<RecommendationTemplate & { trait: string; process: string }> = [];

  for (const trait of traits) {
    for (const process of selectedProcesses) {
      const template = getRecommendation(trait, process);
      if (template) {
        results.push({ ...template, trait, process });
      }
    }
  }

  return results;
}

export function formatRecommendation(template: RecommendationTemplate): string {
  let result = `${template.recall}\nê·¸ë˜ì„œ ${template.recommended}ì´ ë§ì•„ìš”. ${template.reason}`;
  if (template.warning) {
    result += `\nâš ï¸ ${template.warning}`;
  }
  return result;
}
```

---

## ì‘ì—… 8: V5 í”Œë¡œìš° ì¬ì—°ê²°

**íŒŒì¼:** `app/v5/page.tsx` (ìˆ˜ì •)

**í˜„ì¬ ìƒíƒœ**: 7ë‹¨ê³„ (intro, mood, spaceInfo, photo, chat, analyzing, result)

**ë³€ê²½ ë‚´ìš©**: 10ë‹¨ê³„ë¡œ í™•ì¥

```typescript
// ë‹¨ê³„ ì •ì˜ ìˆ˜ì •
type V5Step = 
  | 'space-info'
  | 'analysis-phase1'
  | 'dna-result-1'
  | 'style-recommend'
  | 'process-select'
  | 'analysis-phase2'
  | 'dna-result-2'
  | 'process-detail'
  | 'additional-options'
  | 'options'
  | 'estimate';

// ë‹¨ê³„ ì´ë™ í•¨ìˆ˜
const STEPS: V5Step[] = [
  'space-info',
  'analysis-phase1',
  'dna-result-1',
  'style-recommend',
  'process-select',
  'analysis-phase2',
  'dna-result-2',
  'process-detail',
  'additional-options',
  'options',
  'estimate',
];

const handleGoToNextStep = (currentStep: V5Step) => {
  const currentIndex = STEPS.indexOf(currentStep);
  const nextStep = STEPS[currentIndex + 1];
  
  if (nextStep) {
    // í˜„ì¬ ë°ì´í„° ì €ì¥
    if (currentStep === 'dna-result-1') {
      localStorage.setItem('v5DnaResult1', JSON.stringify(dnaResult));
    }
    if (currentStep === 'dna-result-2') {
      localStorage.setItem('v5DnaResult2', JSON.stringify(optionDnaResult));
    }
    
    router.push(`/v5/${nextStep}`);
  }
};
```

**ì£¼ì˜ì‚¬í•­**:
- ê¸°ì¡´ ë‹¨ê³„ì™€ì˜ í˜¸í™˜ì„± ìœ ì§€
- localStorage ì €ì¥ ë¡œì§ ì¶”ê°€
- ê° ë‹¨ê³„ë³„ ë¼ìš°íŒ… í™•ì¸

---

## ì‘ì—… 9: ëœë¤ ì œê±°

**íŒŒì¼:** `lib/analysis/v5-ultimate/dna-types.ts` (ìˆ˜ì •)

**ë³€ê²½ ë‚´ìš©**:
```typescript
// ë³€ê²½ ì „
const variation = Math.floor(Math.random() * 10) - 5;
return Math.min(99, Math.max(60, Math.round(baseScore + variation)));

// ë³€ê²½ í›„
const confidenceBonus = Math.min(5, matchCount * 0.5);
return Math.min(99, Math.max(60, Math.round(baseScore + confidenceBonus)));
```

---

## ì‘ì—… 10: ì„±í–¥ë¶„ì„ ì§ˆë¬¸ êµ¬ì¡° (ì‹ ê·œ)

**íŒŒì¼:** `lib/analysis/v5-ultimate/analysis-questions.ts` (ì‹ ê·œ ìƒì„±)

**ìƒì„± ë‚´ìš©**:
```typescript
// 1ì°¨ ì„±í–¥ë¶„ì„: ìƒí™œíŒ¨í„´, ì·¨í–¥, ê°€ì¹˜ê´€
export const PRIMARY_QUESTIONS = [
  {
    id: 'cooking',
    question: 'ìš”ë¦¬ëŠ” ì–¼ë§ˆë‚˜ ìì£¼ í•˜ì„¸ìš”?',
    options: [
      { value: 'daily', label: 'ê±°ì˜ ë§¤ì¼', trait: 'COOKING_LOVER' },
      { value: 'weekly', label: 'ì£¼ 2~3íšŒ', trait: null },
      { value: 'rarely', label: 'ê±°ì˜ ì•ˆ í•¨', trait: null },
    ],
  },
  {
    id: 'cleaning',
    question: 'ì²­ì†Œ ìŠ¤íƒ€ì¼ì€ ì–´ë– ì„¸ìš”?',
    options: [
      { value: 'daily', label: 'ë§¤ì¼ ì¡°ê¸ˆì”©', trait: null },
      { value: 'weekly', label: 'ì£¼ë§ì— ëª°ì•„ì„œ', trait: 'CLEANING_SYSTEM_NEED' },
      { value: 'minimal', label: 'ìµœì†Œí•œë§Œ', trait: 'CLEANING_SYSTEM_NEED' },
    ],
  },
  {
    id: 'noise',
    question: 'ì†ŒìŒì— ë¯¼ê°í•˜ì„¸ìš”?',
    options: [
      { value: 'very', label: 'ë§¤ìš° ë¯¼ê°', trait: 'SOUNDPROOF_NEED' },
      { value: 'normal', label: 'ë³´í†µ', trait: null },
      { value: 'not', label: 'ìƒê´€ì—†ìŒ', trait: null },
    ],
  },
  {
    id: 'family',
    question: 'í•¨ê»˜ ì‚¬ëŠ” ê°€ì¡± êµ¬ì„±ì€?',
    options: [
      { value: 'kids', label: 'ì–´ë¦° ìë…€ ìˆìŒ', trait: 'SAFETY_NEED' },
      { value: 'couple', label: 'ë¶€ë¶€/ì»¤í”Œ', trait: null },
      { value: 'single', label: '1ì¸ ê°€êµ¬', trait: null },
      { value: 'parents', label: 'ë¶€ëª¨ë‹˜ê³¼ í•¨ê»˜', trait: null },
    ],
  },
  {
    id: 'priority',
    question: 'ì¸í…Œë¦¬ì–´ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê±´?',
    options: [
      { value: 'design', label: 'ì˜ˆìœ ë””ìì¸', trait: 'MODERN_LOVER' },
      { value: 'practical', label: 'ì‹¤ìš©ì„±', trait: 'STORAGE_NEED' },
      { value: 'comfort', label: 'í¸ì•ˆí•¨', trait: 'NATURAL_LOVER' },
      { value: 'value', label: 'ì§‘ê°’ ìƒìŠ¹', trait: null },
    ],
  },
];

// 2ì°¨ ì„±í–¥ë¶„ì„: ì„ íƒ ê³µì • ê¸°ë°˜ êµ¬ì²´ì  ì§ˆë¬¸
export const SECONDARY_QUESTIONS: Record<string, Array<{
  id: string;
  question: string;
  options: Array<{ value: string; label: string; recommendation?: string }>;
}>> = {
  'ì£¼ë°©': [
    {
      id: 'kitchen_pain',
      question: 'ì£¼ë°©ì—ì„œ ê°€ì¥ ë¶ˆí¸í•œ ì ì€?',
      options: [
        { value: 'storage', label: 'ìˆ˜ë‚© ê³µê°„ ë¶€ì¡±', recommendation: 'í‚¤í°ì¥ ì¶”ê°€' },
        { value: 'counter', label: 'ì¡°ë¦¬ ê³µê°„ ë¶€ì¡±', recommendation: 'ì•„ì¼ëœë“œ ì¶”ê°€' },
        { value: 'cleaning', label: 'ì²­ì†Œí•˜ê¸° ì–´ë ¤ì›€', recommendation: 'ì—”ì§€ë‹ˆì–´ë“œìŠ¤í†¤ ìƒíŒ' },
        { value: 'old', label: 'ì „ì²´ì ìœ¼ë¡œ ë‚¡ìŒ', recommendation: 'ì „ì²´ êµì²´' },
      ],
    },
    {
      id: 'kitchen_appliance',
      question: 'ë¹ŒíŠ¸ì¸ ê°€ì „ ê³„íšì€?',
      options: [
        { value: 'dishwasher', label: 'ì‹ê¸°ì„¸ì²™ê¸° í•„ìˆ˜', recommendation: 'í•˜ë¶€ì¥ ë°°ì¹˜ ì¡°ì •' },
        { value: 'oven', label: 'ì˜¤ë¸ í•„ìˆ˜', recommendation: 'í‚¤í°ì¥ì— ë°°ì¹˜' },
        { value: 'none', label: 'ê¸°ì¡´ ê°€ì „ ì‚¬ìš©', recommendation: null },
      ],
    },
  ],
  'ìš•ì‹¤': [
    {
      id: 'bathroom_user',
      question: 'ìš•ì‹¤ ì£¼ ì‚¬ìš©ìëŠ”?',
      options: [
        { value: 'kids', label: 'ì•„ì´ë“¤ ìœ„ì£¼', recommendation: 'ë¯¸ë„ëŸ¼ë°©ì§€ íƒ€ì¼' },
        { value: 'adults', label: 'ì–´ë¥¸ ìœ„ì£¼', recommendation: 'í˜¸í…”ì‹ ë§ˆê°' },
        { value: 'elderly', label: 'ì–´ë¥´ì‹  ê³„ì‹¬', recommendation: 'ì•ˆì „ë°” ì„¤ì¹˜' },
      ],
    },
    {
      id: 'bathroom_style',
      question: 'ì›í•˜ëŠ” ìš•ì‹¤ ëŠë‚Œì€?',
      options: [
        { value: 'hotel', label: 'í˜¸í…” ê°™ì€', recommendation: 'ëŒ€í˜•íƒ€ì¼ + ê°„ì ‘ì¡°ëª…' },
        { value: 'clean', label: 'ê¹”ë”í•œ', recommendation: 'í™”ì´íŠ¸ í†¤ + ëŒ€í˜•íƒ€ì¼' },
        { value: 'warm', label: 'ë”°ëœ»í•œ', recommendation: 'ìš°ë“œí†¤ + ë‚œë°©' },
      ],
    },
  ],
  'ë°”ë‹¥ì¬': [
    {
      id: 'floor_use',
      question: 'ë°”ë‹¥ ì‚¬ìš© íŒ¨í„´ì€?',
      options: [
        { value: 'barefoot', label: 'ë§¨ë°œë¡œ ë‹¤ë‹˜', recommendation: 'ì˜¨ëŒë§ˆë£¨' },
        { value: 'slippers', label: 'ìŠ¬ë¦¬í¼ ì°©ìš©', recommendation: 'ê°•ë§ˆë£¨' },
        { value: 'pets', label: 'ë°˜ë ¤ë™ë¬¼ ìˆìŒ', recommendation: 'SPC ë˜ëŠ” ê°•ë§ˆë£¨' },
      ],
    },
  ],
  'ê°€êµ¬': [
    {
      id: 'storage_need',
      question: 'ìˆ˜ë‚© ê³ ë¯¼ì€?',
      options: [
        { value: 'clothes', label: 'ì˜·ì´ ë„ˆë¬´ ë§ìŒ', recommendation: 'ë“œë ˆìŠ¤ë£¸í˜• ë¶™ë°•ì´ì¥' },
        { value: 'shoes', label: 'ì‹ ë°œì´ ë§ìŒ', recommendation: 'ëŒ€í˜• ì‹ ë°œì¥' },
        { value: 'books', label: 'ì±…/ë¬¼ê±´ ë§ìŒ', recommendation: 'ë²½ë©´ ìˆ˜ë‚©ì¥' },
        { value: 'none', label: 'ì ë‹¹í•¨', recommendation: null },
      ],
    },
  ],
  'ìƒ¤ì‹œ': [
    {
      id: 'window_problem',
      question: 'í˜„ì¬ ì°½ë¬¸ ë¬¸ì œëŠ”?',
      options: [
        { value: 'cold', label: 'ê²¨ìš¸ì— ì¶¥ë‹¤', recommendation: 'ì‹œìŠ¤í…œ ì´ì¤‘ì°½' },
        { value: 'noise', label: 'ì†ŒìŒì´ ë“¤ë¦°ë‹¤', recommendation: 'ë°©ìŒ íŠ¹í™” ìƒ¤ì‹œ' },
        { value: 'old', label: 'ì˜¤ë˜ë¨', recommendation: 'ì „ì²´ êµì²´' },
      ],
    },
  ],
  'ì¤‘ë¬¸': [
    {
      id: 'door_need',
      question: 'ì¤‘ë¬¸ í•„ìš”í•œ ì´ìœ ëŠ”?',
      options: [
        { value: 'noise', label: 'ì†ŒìŒ ì°¨ë‹¨', recommendation: '3ì—°ë™ ìë™' },
        { value: 'dust', label: 'ë¯¸ì„¸ë¨¼ì§€ ì°¨ë‹¨', recommendation: 'ê¸°ë°€í˜• ì¤‘ë¬¸' },
        { value: 'privacy', label: 'ì‹œì„  ì°¨ë‹¨', recommendation: 'ë¶ˆíˆ¬ëª… ìœ ë¦¬' },
        { value: 'design', label: 'ì¸í…Œë¦¬ì–´', recommendation: 'ìŠ¬ë¦¼ í”„ë ˆì„' },
      ],
    },
  ],
  'ë„ë°°': [
    {
      id: 'wall_style',
      question: 'ì›í•˜ëŠ” ë²½ ëŠë‚Œì€?',
      options: [
        { value: 'clean', label: 'ê¹”ë”í•œ ë‹¨ìƒ‰', recommendation: 'ì‹¤í¬ ë²½ì§€' },
        { value: 'texture', label: 'ì§ˆê° ìˆëŠ”', recommendation: 'ìˆ˜ì… ë²½ì§€' },
        { value: 'paint', label: 'í˜ì¸íŠ¸ ëŠë‚Œ', recommendation: 'í•©ì§€ or í˜ì¸íŠ¸' },
      ],
    },
  ],
};

// ì§ˆë¬¸ ê°€ì ¸ì˜¤ê¸° í•¨ìˆ˜
export function getPrimaryQuestions() {
  return PRIMARY_QUESTIONS;
}

export function getSecondaryQuestions(selectedProcesses: string[]): typeof SECONDARY_QUESTIONS[string] {
  const questions: typeof SECONDARY_QUESTIONS[string] = [];
  for (const process of selectedProcesses) {
    if (SECONDARY_QUESTIONS[process]) {
      questions.push(...SECONDARY_QUESTIONS[process]);
    }
  }
  return questions;
}
```

---

## âš ï¸ ì‘ì—… ì‹œì‘ ì „ í™•ì¸ ì‚¬í•­

### 1. ê¸°ì¡´ ì½”ë“œ í˜¸í™˜ì„±
- âœ… `ValueScores` íƒ€ì… ìœ ì§€ (ê¸°ì¡´ ì½”ë“œ í˜¸í™˜)
- âœ… ê¸°ì¡´ í•¨ìˆ˜ëŠ” deprecated ì²˜ë¦¬ë§Œ (ì‚­ì œ ê¸ˆì§€)
- âœ… `MoodSelector` â†’ `StyleSelector` ë¦¬ë„¤ì„ ì‹œ import ê²½ë¡œ ëª¨ë‘ ìˆ˜ì •

### 2. íŒŒì¼ ìƒì„±/ìˆ˜ì • ëª©ë¡
- **ì‹ ê·œ ìƒì„±**: 5ê°œ íŒŒì¼
  - `app/v5/additional-options/page.tsx`
  - `lib/analysis/v5-ultimate/code-mapping.ts`
  - `lib/analysis/v5-ultimate/index-explanation.ts`
  - `lib/analysis/v5-ultimate/recommendation-templates.ts`
  - `lib/analysis/v5-ultimate/analysis-questions.ts`
- **ìˆ˜ì •**: 8ê°œ íŒŒì¼
  - `app/v5/process-select/page.tsx`
  - `app/v5/process-detail/page.tsx`
  - `components/v5-ultimate/MoodSelector.tsx` â†’ `StyleSelector.tsx` (ë¦¬ë„¤ì„)
  - `app/v5/page.tsx`
  - `lib/data/gradeSpecs.ts`
  - `lib/analysis/v5-ultimate/types.ts`
  - `lib/analysis/v5-ultimate/valueCalculator.ts`
  - `lib/analysis/v5-ultimate/dna-types.ts`

### 3. ì˜ì¡´ì„± í™•ì¸
- `code-mapping.ts`ëŠ” ë‹¤ë¥¸ íŒŒì¼ì—ì„œ importë¨
- `types.ts`ëŠ” ì—¬ëŸ¬ íŒŒì¼ì—ì„œ importë¨
- ì‘ì—… ìˆœì„œ: íƒ€ì… ì •ì˜ â†’ ë§¤í•‘ í•¨ìˆ˜ â†’ ê³„ì‚° í•¨ìˆ˜ â†’ ì„¤ëª… í•¨ìˆ˜

### 4. ë¹Œë“œ í…ŒìŠ¤íŠ¸
- ê° ì‘ì—… í›„ `npm run build` í™•ì¸
- íƒ€ì… ì—ëŸ¬ ì¦‰ì‹œ ìˆ˜ì •
- import ê²½ë¡œ í™•ì¸

---

## ğŸ¯ ì‘ì—… ìˆœì„œ ê¶Œì¥

1. **íƒ€ì… ì •ì˜** (ì‘ì—… 4) - ë‹¤ë¥¸ ì‘ì—…ì˜ ê¸°ë°˜
2. **ë§¤í•‘ í•¨ìˆ˜** (ì‘ì—… 1) - ê³„ì‚° í•¨ìˆ˜ì—ì„œ ì‚¬ìš©
3. **ê³µì • ëª©ë¡** (ì‘ì—… 0, 0-1) - í”Œë¡œìš° ê¸°ë°˜
4. **ê³„ì‚° í•¨ìˆ˜** (ì‘ì—… 5) - íƒ€ì…ê³¼ ë§¤í•‘ í•„ìš”
5. **ì„¤ëª… í•¨ìˆ˜** (ì‘ì—… 6) - ê³„ì‚° ê²°ê³¼ í•„ìš”
6. **í…œí”Œë¦¿** (ì‘ì—… 7) - ë…ë¦½ì 
7. **ì§ˆë¬¸ êµ¬ì¡°** (ì‘ì—… 10) - ë…ë¦½ì 
8. **ë“±ê¸‰ í•¨ìˆ˜** (ì‘ì—… 3) - íƒ€ì… í•„ìš”
9. **ìš©ì–´ ë³€ê²½** (ì‘ì—… 2) - ë…ë¦½ì 
10. **í”Œë¡œìš° ì¬ì—°ê²°** (ì‘ì—… 8) - ëª¨ë“  í˜ì´ì§€ í•„ìš”
11. **ëœë¤ ì œê±°** (ì‘ì—… 9) - ë…ë¦½ì 
12. **ì¶”ê°€ì˜µì…˜ í˜ì´ì§€** (ì‘ì—… 0-2) - ë…ë¦½ì 

---

**ì‘ì„±ì¼**: 2024-12-21  
**ë²„ì „**: 3.3 (ìµœì¢… í†µí•©)


