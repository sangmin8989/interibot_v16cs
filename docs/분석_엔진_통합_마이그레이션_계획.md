# 분석 엔진 통합 마이그레이션 계획

> **작성일**: 2025-12-31  
> **목적**: 다중 분석 엔진을 V5 Ultimate로 통합

---

## 📋 현재 상태

### 사용 중인 엔진

| 엔진 | 파일 위치 | API 엔드포인트 | 상태 |
|------|----------|---------------|------|
| **V5 Ultimate** | `lib/analysis/v5-ultimate/` | `/api/analyze/v5` | 🟢 공식 (현재 사용) |
| V5 | `lib/analysis/v5/` | - | 🟡 부분 사용 |
| V3.1 Core | `lib/analysis/engine-v3.1-core/` | `/api/analyze/v31` | 🟡 부분 사용 |

### 레거시 엔진 (봉인 필요)

| 엔진 | 파일 위치 | API 엔드포인트 | 상태 |
|------|----------|---------------|------|
| V3 | `lib/analysis/engine-v3/` | - | 🔴 레거시 |
| V2 | `lib/analysis/engine-v2.ts` | - | 🔴 레거시 |
| V1 | `lib/analysis/engine.ts` | - | 🔴 레거시 |

---

## 🎯 목표

1. **V5 Ultimate를 메인 엔진으로 유지**
2. **V3.1 Core의 핵심 기능을 V5 Ultimate에 통합**
3. **레거시 엔진 봉인**

---

## 📝 통합 전략

### Phase 1: V3.1 Core 기능 분석

**작업 내용**:
1. V3.1 Core의 핵심 기능 파악
2. V5 Ultimate와의 차이점 분석
3. 통합 가능한 부분 식별

---

### Phase 2: V5 Ultimate 확장

**작업 내용**:
1. V3.1 Core의 Needs 분석 로직 통합
2. Action 생성 로직 통합
3. Resolution 도출 로직 통합

---

### Phase 3: API 통합

**작업 내용**:
1. `/api/analyze/v31`을 V5 Ultimate로 리다이렉트
2. 또는 V5 Ultimate가 V3.1 형식도 지원하도록 확장

---

## ⚠️ 주의사항

1. **의존성 확인**
   - V3.1 Core가 V3 TraitEngine에 의존하는지 확인
   - 의존성 해결 필요

2. **테스트**
   - 통합 전후 분석 결과 비교
   - 모든 시나리오 테스트

---

## 📊 진행 상황

- [ ] Phase 1: V3.1 Core 기능 분석
- [ ] Phase 2: V5 Ultimate 확장
- [ ] Phase 3: API 통합

---

**작성 완료** ✅
