# 인테리어 공정 옵션 관련 파일 및 코드 정리

> **작성일**: 2024-12-21  
> **목적**: 인테리어 공정 중 옵션 항목 관련된 모든 파일과 코드 위치 정리

---

## 📁 옵션 관련 파일 구조

```
인테리봇/
├── app/
│   ├── v5/
│   │   ├── process-select/page.tsx          # 공정 선택 (hasOptions 속성)
│   │   ├── process-detail/page.tsx         # 세부 옵션 선택 (V5 플로우)
│   │   └── options/page.tsx                # 등급 선택
│   ├── onboarding/
│   │   └── detail-options/page.tsx         # 세부 옵션 선택 (온보딩 플로우)
│   └── process-options/page.tsx           # 공정 옵션 선택 (구버전)
│
├── components/
│   └── onboarding/
│       └── options/                         # 옵션 패널 컴포넌트
│           ├── KitchenOptionsPanel.tsx     # 주방 옵션 패널
│           ├── BathroomOptionsPanel.tsx    # 욕실 옵션 패널
│           ├── LivingOptionsPanel.tsx      # 거실/방 옵션 패널
│           └── EntranceOptionsPanel.tsx    # 현관/발코니 옵션 패널
│
├── lib/
│   ├── estimate/
│   │   ├── types.ts                        # 옵션 타입 정의 (주요)
│   │   ├── config/
│   │   │   └── process-config.ts           # 공정별 옵션 설정
│   │   └── calculator-v3.ts                # 옵션 인터페이스 (구버전)
│   └── data/
│       └── gradeSpecs.ts                   # 등급별 옵션 스펙
│
├── types/
│   └── process-options.ts                  # 공정 옵션 타입 정의
│
└── constants/
    └── process-definitions.ts              # 공정 정의 및 옵션 구조
```

---

## 📄 주요 파일 상세

### 1. 옵션 타입 정의 파일

#### `lib/estimate/types.ts` ⭐ **핵심 파일**

**위치**: `lib/estimate/types.ts`

**주요 내용**:
- `KitchenOptions`: 주방 옵션 타입
- `BathroomOptions`: 욕실 옵션 타입
- `WoodworkOptions`: 목공 옵션 타입
- `ElectricOptions`: 전기 옵션 타입
- `WallpaperOptions`: 도배 옵션 타입
- `TileOptions`: 타일 옵션 타입
- `FilmOptions`: 필름 옵션 타입
- `WindowOptions`: 창호 옵션 타입

**주요 타입**:
```typescript
// 주방 옵션
export interface KitchenOptions {
  형태?: KitchenLayout  // '일자' | 'ㄱ자' | 'ㄷ자' | '아일랜드' | 'ㄱ자+아일랜드'
  상판재질?: CountertopMaterial  // '인조대리석' | '엔지니어드스톤' | '세라믹' | ...
  냉장고장?: boolean
  키큰장?: boolean
  아일랜드장?: boolean
  팬트리?: boolean
  설비?: KitchenAppliances
  상부장LED?: boolean
  하부장LED?: boolean
  정수기설치?: boolean
  // ...
}

// 욕실 옵션
export interface BathroomOptions {
  스타일?: BathroomStyle  // '모던' | '클래식' | '미니멀' | '내추럴' | '호텔식'
  벽타일사이즈?: TileSize
  바닥타일사이즈?: TileSize
  양변기등급?: SanitaryGrade
  세면대등급?: SanitaryGrade
  욕조?: boolean
  샤워부스?: boolean
  비데?: boolean
  수전업그레이드?: boolean
  // ...
}
```

---

#### `types/process-options.ts`

**위치**: `types/process-options.ts`

**주요 내용**:
- `ProcessDefinition`: 공정 정의 (3단 옵션 구조)
- `ProcessTierOptions`: 기본/편하게/프리미엄 옵션
- `ProcessSelection`: 고객 선택 결과

**3단 옵션 구조**:
```typescript
interface ProcessTierOptions {
  basic: ProcessOptionItem[];       // 필요한 만큼
  comfort: ProcessOptionItem[];     // 생활 편하게
  premium: ProcessOptionItem[];     // 아쉬움 없이
}
```

---

### 2. 옵션 패널 컴포넌트

#### `components/onboarding/options/KitchenOptionsPanel.tsx`

**위치**: `components/onboarding/options/KitchenOptionsPanel.tsx`

**기능**:
- 주방 형태 선택 (일자, ㄱ자, ㄷ자, 아일랜드)
- 상판 재질 선택 (인조대리석, 엔지니어드스톤, 세라믹 등)
- 추가 수납장 선택 (냉장고장, 키큰장, 팬트리)
- 정수기 설치 공간 설정
- 설비 옵션 (쿡탑, 식기세척기, 빌트인 오븐 등)
- LED 조명 옵션

**사용 위치**:
- `app/onboarding/detail-options/page.tsx`
- `app/v5/process-detail/page.tsx` (직접 구현, 이 컴포넌트 미사용)

---

#### `components/onboarding/options/BathroomOptionsPanel.tsx`

**위치**: `components/onboarding/options/BathroomOptionsPanel.tsx`

**기능**:
- 욕실 스타일 선택 (모던, 미니멀, 내추럴, 클래식, 호텔식)
- 타일 사이즈 선택 (소형, 중형, 대형, 대판)
- 위생도기 등급 선택 (기본, 중급, 고급, 프리미엄)
- 욕조/샤워부스 선택
- 추가 옵션 (비데, 젠다이, 파티션, 바닥난방)
- 환풍기 등급 선택

**사용 위치**:
- `app/onboarding/detail-options/page.tsx`
- `app/v5/process-detail/page.tsx` (직접 구현, 이 컴포넌트 미사용)

---

#### `components/onboarding/options/LivingOptionsPanel.tsx`

**위치**: `components/onboarding/options/LivingOptionsPanel.tsx`

**기능**:
- 벽지 종류 선택 (합지, 실크, 수입벽지, 친환경, 페인트)
- 바닥재 종류 선택 (강마루, 강화마루, 온돌마루, 원목마루, SPC)
- 조명 타입 선택 (다운라이트, 간접조명, 라인조명, 펜던트)
- 추가 옵션 (포인트벽지, 천장도배, 걸레받이, 디밍가능, 아트월, 몰딩)

**사용 위치**:
- `app/onboarding/detail-options/page.tsx`
- `app/v5/process-detail/page.tsx` ✅ (도배 공정 선택 시 사용)

**타입 정의**:
```typescript
export interface LivingOptions {
  벽지종류?: '합지' | '실크' | '수입벽지' | '친환경' | '페인트'
  바닥재종류?: '강마루' | '강화마루' | '온돌마루' | '원목마루' | 'SPC'
  조명타입?: '다운라이트' | '간접조명' | '라인조명' | '펜던트'
  포인트벽지?: boolean
  천장도배?: boolean
  걸레받이?: boolean
  디밍가능?: boolean
  아트월?: boolean
  몰딩?: boolean
}
```

---

#### `components/onboarding/options/EntranceOptionsPanel.tsx`

**위치**: `components/onboarding/options/EntranceOptionsPanel.tsx`

**기능**:
- 타일 사이즈 선택 (소형, 중형, 대형)
- 타일 패턴 선택 (일반, 헤링본, 다이아몬드)
- 신발장 교체 옵션 (크기, 벤치, 거울)
- 중문 설치 옵션 (슬라이딩, 폴딩, 여닫이)

**사용 위치**:
- `app/onboarding/detail-options/page.tsx`
- `app/v5/process-detail/page.tsx` ✅ (타일 공정 선택 시 사용)

**타입 정의**:
```typescript
export interface EntranceOptions {
  타일사이즈?: '소형' | '중형' | '대형'
  타일패턴?: '일반' | '헤링본' | '다이아몬드'
  신발장교체?: boolean
  신발장크기?: '소형' | '중형' | '대형' | '벽면전체'
  신발장벤치?: boolean
  신발장거울?: boolean
  중문설치?: boolean
  중문타입?: '슬라이딩' | '폴딩' | '여닫이'
}
```

---

### 3. 옵션 선택 페이지

#### `app/v5/process-detail/page.tsx` ⭐ **V5 플로우**

**위치**: `app/v5/process-detail/page.tsx`

**기능**:
- 공정별 세부 옵션 선택
- 주방: 형태, 냉장고장, 키큰장, 아일랜드장, 다용도실, 보조주방
- 욕실: 스타일, 욕조, 샤워부스, 비데, 수전업그레이드 (안방/공용 분리)
- 목공: 가구 선택, 맞춤제작
- 도배: 거실/안방/방 옵션 (LivingOptionsPanel 사용)
- 타일: 현관/발코니 옵션 (EntranceOptionsPanel 사용)

**옵션 정의**:
```typescript
// 주방 형태 옵션
const KITCHEN_LAYOUT_OPTIONS = [
  { value: '일자', label: '일자형', icon: '📐', description: '벽면을 따라 일렬로 배치' },
  { value: 'ㄱ자', label: 'ㄱ자형', icon: '📏', description: '두 벽면을 활용한 L자 배치' },
  { value: 'ㄷ자', label: 'ㄷ자형', icon: '📊', description: '세 벽면을 활용한 U자 배치' },
  { value: '아일랜드', label: '아일랜드형', icon: '🏝️', description: '중앙 작업대가 있는 배치' },
]

// 욕실 스타일 옵션
const BATHROOM_STYLE_OPTIONS = [
  { value: '모던', label: '모던', icon: '✨', description: '깔끔하고 현대적인 스타일' },
  { value: '클래식', label: '클래식', icon: '🏛️', description: '고급스럽고 전통적인 스타일' },
  { value: '미니멀', label: '미니멀', icon: '⬜', description: '간결하고 심플한 스타일' },
  { value: '내추럴', label: '내추럴', icon: '🌿', description: '자연스럽고 따뜻한 스타일' },
]

// 목공 가구 옵션
const WOODWORK_FURNITURE_OPTIONS = [
  { code: 'closet', label: '붙박이장', icon: '🚪', description: '침실/드레스룸 수납장' },
  { code: 'shoeCabinet', label: '신발장', icon: '👞', description: '현관 신발 수납장' },
  { code: 'tvStand', label: 'TV장', icon: '📺', description: '거실 TV 수납장' },
  { code: 'bookshelf', label: '책장', icon: '📚', description: '책/소품 수납장' },
  { code: 'dresser', label: '화장대', icon: '💄', description: '침실 화장대' },
  { code: 'desk', label: '책상', icon: '🖥️', description: '서재/공부방 책상' },
]
```

**특징**:
- 주방: 보조주방 분리 로직 (30평 이상)
- 욕실: 안방욕실/공용욕실 분리 로직 (bathrooms >= 2)
- 거실/안방/방: LivingOptionsPanel 재사용
- 현관/발코니: EntranceOptionsPanel 재사용

---

#### `app/onboarding/detail-options/page.tsx` ⭐ **온보딩 플로우**

**위치**: `app/onboarding/detail-options/page.tsx`

**기능**:
- 모든 공간에 대한 세부 옵션 선택
- 주방: KitchenOptionsPanel 사용
- 욕실: BathroomOptionsPanel 사용 (안방/공용 분리)
- 거실/안방/방: LivingOptionsPanel 사용
- 현관/발코니: EntranceOptionsPanel 사용
- 보조주방 옵션 (30평 이상)

**옵션 저장**:
```typescript
interface DetailOptions {
  주방옵션: KitchenOptions
  보조주방옵션: KitchenOptions
  보조주방사용: boolean
  욕실옵션: BathroomOptions
  안방욕실옵션: BathroomOptions
  공용욕실옵션: BathroomOptions
  거실옵션: LivingOptions
  안방옵션: LivingOptions
  방옵션: LivingOptions
  현관옵션: EntranceOptions
  발코니옵션: EntranceOptions
}
```

---

### 4. 공정 정의 파일

#### `constants/process-definitions.ts`

**위치**: `constants/process-definitions.ts`

**기능**:
- 공정별 3단 옵션 구조 정의
- basic/comfort/premium 옵션 항목 정의

**주요 공정**:
- 철거 (demolition)
- 마감 (finish): 바닥, 벽, 천장
- 조명·전기 (electric)
- 주방 (kitchen)
- 욕실 (bathroom)
- 목공 (carpentry)
- 타일 (tile)
- 도배 (wallpaper)
- 창호 (window)
- 필름 (film)

**옵션 구조 예시**:
```typescript
{
  id: 'finish',
  name: '마감',
  tierOptions: {
    basic: [
      { id: 'floor', name: '바닥', description: '마루/타일/장판 중 선택' },
      { id: 'wall', name: '벽', description: '도장/도배 중 선택' },
      { id: 'ceiling', name: '천장 도장' },
    ],
    comfort: [
      { id: 'grout_color', name: '줄눈 색상 선택' },
      { id: 'waterproof_floor', name: '물청소 가능 마루' },
    ],
    premium: [
      { id: 'large_tile', name: '대판 타일' },
      { id: 'art_wall', name: '아트월' },
    ],
  },
}
```

---

#### `app/v5/process-select/page.tsx`

**위치**: `app/v5/process-select/page.tsx`

**기능**:
- 공정 선택 페이지
- `hasOptions` 속성으로 옵션 필요 여부 표시

**현재 공정 목록** (9개):
```typescript
const PROCESS_OPTIONS = [
  { code: '철거', name: '철거', hasOptions: false },
  { code: '주방', name: '주방', hasOptions: true },
  { code: '욕실', name: '욕실', hasOptions: true },
  { code: '타일', name: '타일', hasOptions: false },
  { code: '목공', name: '목공', hasOptions: true },
  { code: '전기', name: '전기', hasOptions: false },
  { code: '도배', name: '도배', hasOptions: false },
  { code: '필름', name: '필름', hasOptions: false },
  { code: '기타', name: '기타', hasOptions: false },
]
```

**참고**: 재수정 지시서에 따라 14개로 확장 예정

---

### 5. 등급별 옵션 스펙

#### `lib/data/gradeSpecs.ts`

**위치**: `lib/data/gradeSpecs.ts`

**기능**:
- 등급별(ESSENTIAL/STANDARD/OPUS) 공정별 상세 스펙 정의
- 주방, 욕실, 바닥재, 도배, 샤시, 중문, 도어, 전기, 도장, 필름, 가구, 철거 등

**주요 스펙 타입**:
```typescript
export interface KitchenSpec {
  sink: KitchenSinkSpec
  upper: KitchenUpperSpec
  counter: KitchenCounterSpec
  sinkFaucet: KitchenSinkFaucetSpec
  hood: KitchenHoodSpec
  island: KitchenIslandSpec
  total32py: { material: number; labor: number; total: number }
}

export const KITCHEN_SPECS: Record<ArgenGrade, KitchenSpec> = {
  ESSENTIAL: { /* ... */ },
  STANDARD: { /* ... */ },
  OPUS: { /* ... */ },
}
```

---

## 🔍 옵션 데이터 흐름

### V5 플로우 옵션 흐름

```
1. app/v5/process-select/page.tsx
   ↓ (공정 선택)
   
2. app/v5/process-detail/page.tsx
   ↓ (세부 옵션 선택)
   - 주방: 형태, 냉장고장, 키큰장 등
   - 욕실: 스타일, 욕조, 샤워부스 등
   - 목공: 가구 선택
   - 도배: LivingOptionsPanel 사용
   - 타일: EntranceOptionsPanel 사용
   ↓ (URL 파라미터로 전달)
   
3. app/v5/options/page.tsx
   ↓ (등급 선택)
   ↓ (localStorage에 저장)
   
4. app/onboarding/estimate/page.tsx
   ↓ (견적 계산)
```

### 온보딩 플로우 옵션 흐름

```
1. app/onboarding/scope/page.tsx
   ↓ (공간 선택)
   
2. app/onboarding/detail-options/page.tsx
   ↓ (세부 옵션 선택)
   - KitchenOptionsPanel 사용
   - BathroomOptionsPanel 사용
   - LivingOptionsPanel 사용
   - EntranceOptionsPanel 사용
   ↓ (localStorage에 저장)
   
3. app/onboarding/estimate/page.tsx
   ↓ (견적 계산)
```

---

## 📊 옵션 타입 매핑

### 공정별 옵션 타입

| 공정 | 옵션 타입 | 파일 위치 |
|------|----------|----------|
| 주방 | `KitchenOptions` | `lib/estimate/types.ts` |
| 욕실 | `BathroomOptions` | `lib/estimate/types.ts` |
| 목공 | `WoodworkOptions` | `lib/estimate/types.ts` |
| 전기 | `ElectricOptions` | `lib/estimate/types.ts` |
| 도배 | `WallpaperOptions` | `lib/estimate/types.ts` |
| 타일 | `TileOptions` | `lib/estimate/types.ts` |
| 필름 | `FilmOptions` | `lib/estimate/types.ts` |
| 창호 | `WindowOptions` | `lib/estimate/types.ts` |
| 거실/방 | `LivingOptions` | `components/onboarding/options/LivingOptionsPanel.tsx` |
| 현관/발코니 | `EntranceOptions` | `components/onboarding/options/EntranceOptionsPanel.tsx` |

---

## 🎯 주요 옵션 항목 정리

### 주방 옵션

**형태**:
- 일자형, ㄱ자형, ㄷ자형, 아일랜드형, ㄱ자+아일랜드형

**상판 재질**:
- 인조대리석, 엔지니어드스톤, 세라믹, 천연대리석, 스테인리스

**추가 수납장**:
- 냉장고장, 키큰장, 아일랜드장, 팬트리, 김치냉장고장

**설비**:
- 쿡탑 (가스레인지, 인덕션, 하이브리드)
- 식기세척기, 빌트인 오븐, 빌트인 정수기

**조명**:
- 상부장 LED, 하부장 LED

**정수기**:
- 정수기 설치 공간, 정수기 타입, 전용 배관

---

### 욕실 옵션

**스타일**:
- 모던, 미니멀, 내추럴, 클래식, 호텔식

**타일**:
- 벽타일 사이즈 (소형, 중형, 대형, 대판)
- 바닥타일 사이즈
- 포인트 타일

**위생도기**:
- 양변기 등급 (기본, 중급, 고급, 프리미엄)
- 세면대 등급

**욕조/샤워**:
- 욕조 (일반, 반신욕, 자쿠지)
- 샤워부스 (일반, 레인샤워, 월풀)

**추가 옵션**:
- 비데, 젠다이, 파티션, 바닥난방
- 환풍기 등급 (기본, 제습형, 냉온풍)

---

### 목공 옵션

**가구 선택**:
- 붙박이장, 신발장, TV장, 책장, 화장대, 책상

**붙박이장 옵션**:
- 재질 (PET, UV, 원목무늬, 원목)
- 크기 (2400, 3000, 3600, 벽면전체)
- 내부 구성 (선반, 서랍, 행거, 바지걸이, 넥타이걸이)

**신발장 옵션**:
- 크기 (소형, 중형, 대형, 벽면전체)
- 벤치, 거울

**문/중문**:
- 방문 교체, 방문 재질 (ABS, 원목도어, 유리도어)
- 중문 타입 (슬라이딩, 폴딩, 여닫이)

**맞춤 제작**:
- 맞춤제작 여부

---

### 거실/방 옵션 (LivingOptions)

**도배/벽지**:
- 벽지 종류 (합지, 실크, 수입벽지, 친환경, 페인트)
- 포인트 벽지, 천장 도배

**바닥재**:
- 바닥재 종류 (강마루, 강화마루, 온돌마루, 원목마루, SPC)
- 걸레받이

**조명**:
- 조명 타입 (다운라이트, 간접조명, 라인조명, 펜던트)
- 조명 개수, 디밍 가능

**특수 옵션**:
- 아트월, 몰딩

---

### 현관/발코니 옵션 (EntranceOptions)

**타일**:
- 타일 사이즈 (소형, 중형, 대형)
- 타일 패턴 (일반, 헤링본, 다이아몬드)

**신발장** (현관만):
- 신발장 교체, 크기, 벤치, 거울

**중문** (현관만):
- 중문 설치, 중문 타입 (슬라이딩, 폴딩, 여닫이)

---

## 🔗 옵션 사용 위치

### V5 플로우

1. **공정 선택**: `app/v5/process-select/page.tsx`
   - `hasOptions` 속성으로 옵션 필요 여부 표시

2. **세부 옵션 선택**: `app/v5/process-detail/page.tsx`
   - 주방: 직접 구현 (KITCHEN_LAYOUT_OPTIONS 사용)
   - 욕실: 직접 구현 (BATHROOM_STYLE_OPTIONS 사용)
   - 목공: 직접 구현 (WOODWORK_FURNITURE_OPTIONS 사용)
   - 도배: `LivingOptionsPanel` 사용
   - 타일: `EntranceOptionsPanel` 사용

3. **등급 선택**: `app/v5/options/page.tsx`
   - 옵션 정보를 URL 파라미터로 전달

---

### 온보딩 플로우

1. **세부 옵션 선택**: `app/onboarding/detail-options/page.tsx`
   - `KitchenOptionsPanel` 사용
   - `BathroomOptionsPanel` 사용
   - `LivingOptionsPanel` 사용
   - `EntranceOptionsPanel` 사용

---

## 📝 옵션 저장 방식

### V5 플로우

**저장 위치**: URL 파라미터 + localStorage

**예시**:
```typescript
// URL 파라미터
?processes=주방,욕실
&kitchenLayout=일자
&kitchenRefrigerator=true
&bathroomStyle=모던
&bathroomBathtub=true

// localStorage
v5EstimateOptions: {
  grade: 'STANDARD',
  processes: '주방,욕실',
  kitchenLayout: '일자',
  bathroomStyle: '모던',
  dnaResult: { ... }
}
```

---

### 온보딩 플로우

**저장 위치**: localStorage

**예시**:
```typescript
// localStorage
interibot_detail_options: {
  주방옵션: { 형태: '일자', 상판재질: '엔지니어드스톤', ... },
  욕실옵션: { 스타일: '모던', 욕조: true, ... },
  거실옵션: { 벽지종류: '실크', 바닥재종류: '강마루', ... },
  // ...
}
```

---

## 🎨 옵션 UI 컴포넌트 특징

### 공통 특징

1. **아코디언 형태**: 섹션별로 접기/펼치기 가능
2. **가격 정보 표시**: 각 옵션별 가격 영향 표시
3. **설명 제공**: 각 옵션별 설명 제공
4. **시각적 피드백**: 선택된 옵션 강조 표시

### 컴포넌트별 특징

- **KitchenOptionsPanel**: 주방 전용 (오렌지 계열 색상)
- **BathroomOptionsPanel**: 욕실 전용 (시안 계열 색상)
- **LivingOptionsPanel**: 거실/방 공용 (아르젠 계열 색상)
- **EntranceOptionsPanel**: 현관/발코니 공용 (앰버/그린 계열 색상)

---

## 🔍 옵션 관련 검색 키워드

### 파일 검색 키워드

- `*Options*.tsx`: 옵션 컴포넌트
- `*options*.tsx`: 옵션 페이지
- `process-options.ts`: 옵션 타입 정의
- `process-definitions.ts`: 공정 정의

### 코드 검색 키워드

- `hasOptions`: 옵션 필요 여부
- `KitchenOptions`: 주방 옵션 타입
- `BathroomOptions`: 욕실 옵션 타입
- `LivingOptions`: 거실 옵션 타입
- `EntranceOptions`: 현관 옵션 타입
- `KITCHEN_LAYOUT_OPTIONS`: 주방 형태 옵션
- `BATHROOM_STYLE_OPTIONS`: 욕실 스타일 옵션
- `WOODWORK_FURNITURE_OPTIONS`: 목공 가구 옵션

---

## 📌 요약

### 핵심 파일

1. **타입 정의**: `lib/estimate/types.ts` ⭐
2. **V5 옵션 페이지**: `app/v5/process-detail/page.tsx` ⭐
3. **온보딩 옵션 페이지**: `app/onboarding/detail-options/page.tsx` ⭐
4. **옵션 패널 컴포넌트**: `components/onboarding/options/` ⭐
5. **공정 정의**: `constants/process-definitions.ts`
6. **등급별 스펙**: `lib/data/gradeSpecs.ts`

### 옵션 구조

- **V5 플로우**: `process-detail/page.tsx`에서 직접 구현 + 일부 패널 재사용
- **온보딩 플로우**: `detail-options/page.tsx`에서 패널 컴포넌트 재사용
- **타입 정의**: `lib/estimate/types.ts`에 중앙 집중

---

**작성일**: 2024-12-21  
**버전**: 1.0


